<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whats - Audio DVR</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <h1>Whats - Real-Time Audio DVR</h1>
        <div id="status">Disconnected</div>
        <div id="controls">
            <button id="btn-connect" onclick="connect()">Connect</button>
            <select id="target-language">
                <option value="">No translation</option>
                <option value="en">English</option>
                <option value="pt-BR">Português (Brasil)</option>
                <option value="es">Español</option>
            </select>
            <label for="lookback-slider" id="lookback-label">5s</label>
            <input type="range" id="lookback-slider" min="5" max="60" value="5" step="5"
                   oninput="document.getElementById('lookback-label').textContent = this.value + 's'">
            <button id="btn-enunciate" onclick="enunciate()" disabled>
                Enunciate
            </button>
            <button id="btn-disconnect" onclick="disconnect()" disabled>
                Disconnect
            </button>
        </div>
        <div id="ingest-controls">
            <input type="text" id="ingest-url" placeholder="Paste audio URL (MP3/WAV/HLS/icecast)...">
            <button id="btn-ingest-start" onclick="ingestStart()" disabled>Ingest URL</button>
            <button id="btn-ingest-stop" onclick="ingestStop()" disabled>Stop Ingest</button>
            <div id="ingest-status"></div>
        </div>
        <div id="buffer-viz" style="display:none;">
            <canvas id="buffer-canvas" width="560" height="64"></canvas>
            <div id="buffer-label">0.0s / 60s</div>
        </div>
        <div id="transcript"></div>
        <div id="translation"></div>
        <div id="metrics"></div>
        <audio id="remote-audio" autoplay></audio>
    </div>
    <script src="app.js"></script>
</body>
</html>
